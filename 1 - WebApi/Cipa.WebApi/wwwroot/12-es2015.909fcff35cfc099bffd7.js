(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"T+Ks":function(e,t,o){"use strict";o.r(t);var a=o("fXoL"),i=o("ofXK"),r=o("tyNb"),s=o("Sy1n"),n=o("kn20"),c=o("pLZG"),l=o("eIep"),d=o("vkgz"),p=o("GrLX"),u=o("L5lq"),m=o("dWir"),v=o("gbzl"),h=o("9HPz"),f=o("3Pt+");function g(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"span",14),a["\u0275\u0275text"](1,"Pesquisando..."),a["\u0275\u0275elementEnd"]())}function b(e,t){if(1&e){const e=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",15),a["\u0275\u0275elementStart"](1,"app-card-inscricao",16),a["\u0275\u0275listener"]("votacao",(function(t){return a["\u0275\u0275restoreView"](e),a["\u0275\u0275nextContext"]().votar(t)})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,o=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("candidato",e)("tipo",o.TipoCardEleitor.Votacao)}}let j=(()=>{class e{constructor(e,t,o,a,i){this.route=e,this.router=t,this.eleicoesApi=o,this.formBuilder=a,this.toasts=i,this.TipoCardEleitor=n.b,this.pesquisando=!1}ngOnInit(){this.route.data.pipe(Object(c.a)(e=>e.hasOwnProperty("eleicao")),Object(l.a)(e=>(this.eleicao=e.eleicao,this.eleicoesApi.getInscricoes(e.eleicao.id,u.c.Aprovada)))).subscribe(e=>{this.candidatos=e}),this.form=this.formBuilder.group({filtro:[]}),this.form.get("filtro").valueChanges.pipe(Object(d.a)(e=>this.pesquisando=!0),Object(h.b)(),Object(l.a)(e=>this.eleicoesApi.getInscricoes(this.eleicao.id,u.c.Aprovada,e)),Object(d.a)(e=>this.pesquisando=!1)).subscribe(e=>this.candidatos=e)}votar(e){this.toasts.confirmModal(`Tem certeza que deseja votar para ${e.eleitor.nome}? Seu voto n\xe3o poder\xe1 ser revertido.`).pipe(Object(c.a)(e=>e),Object(l.a)(t=>this.eleicoesApi.postVotar(this.eleicao.id,e.id))).subscribe(e=>{this.toasts.showMessage({message:"Voto registrado com sucesso",title:"Sucesso",type:v.a.success}),this.router.navigate(["/eleicoes"])})}votoBranco(){this.toasts.confirmModal("Tem certeza que deseja votar em branco? Seu voto n\xe3o poder\xe1 ser revertido.").pipe(Object(c.a)(e=>e),Object(l.a)(e=>this.eleicoesApi.postVotoBranco(this.eleicao.id))).subscribe(e=>{this.toasts.showMessage({message:"Voto registrado com sucesso",title:"Sucesso",type:v.a.success}),this.router.navigate(["/eleicoes"])})}}return e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](r.a),a["\u0275\u0275directiveInject"](r.d),a["\u0275\u0275directiveInject"](p.a),a["\u0275\u0275directiveInject"](f.FormBuilder),a["\u0275\u0275directiveInject"](m.a))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["app-votacao"]],decls:17,vars:3,consts:[[1,"container"],[1,"row"],[1,"col-lg-12"],[3,"formGroup"],[1,"input-group"],[1,"input-group-addon"],[1,"fa","fa-search"],["type","text","id","filtro","formControlName","filtro","placeholder","Pesquise pelo nome",1,"input","form-control"],["class","help-block m-b-none",4,"ngIf"],[1,"row","m-t-md"],[1,"col-md-12"],[1,"btn","btn-white",3,"click"],[1,"row","flex-row","m-t-lg"],["class","col-lg-3 col-md-4 col-sm-6 col-xs-6 col-xxs-12",4,"ngFor","ngForOf"],[1,"help-block","m-b-none"],[1,"col-lg-3","col-md-4","col-sm-6","col-xs-6","col-xxs-12"],[3,"candidato","tipo","votacao"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"div",1),a["\u0275\u0275elementStart"](2,"div",2),a["\u0275\u0275elementStart"](3,"h2"),a["\u0275\u0275text"](4,"Escolha um representante para a CIPA!"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"form",3),a["\u0275\u0275elementStart"](6,"div",4),a["\u0275\u0275elementStart"](7,"span",5),a["\u0275\u0275element"](8,"i",6),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](9,"input",7),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](10,g,2,0,"span",8),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](11,"div",9),a["\u0275\u0275elementStart"](12,"div",10),a["\u0275\u0275elementStart"](13,"button",11),a["\u0275\u0275listener"]("click",(function(e){return t.votoBranco()})),a["\u0275\u0275text"](14,"Voto em Branco"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](15,"div",12),a["\u0275\u0275template"](16,b,2,2,"div",13),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("formGroup",t.form),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngIf",t.pesquisando),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngForOf",t.candidatos))},directives:[f["\u0275angular_packages_forms_forms_y"],f.NgControlStatusGroup,f.FormGroupDirective,f.DefaultValueAccessor,f.NgControlStatus,f.FormControlName,i.m,i.l,n.a],styles:[""]}),e})();var w=o("CF8v"),y=o("LRne"),I=o("JIr8"),S=o("lJxs");let E=(()=>{class e{constructor(e,t,o){this.eleicoesApi=e,this.router=t,this.toasts=o}canActivate(e,t){if(e.paramMap.has("id")){const t=+e.paramMap.get("id");return this.eleicoesApi.getVotoUsuario(t).pipe(Object(I.a)(e=>(this.router.navigate(["/eleicoes"]),Object(y.a)(!1))),Object(S.a)(e=>!e||(this.toasts.showMessage({message:"Voc\xea j\xe1 votou nessa elei\xe7\xe3o. N\xe3o \xe9 permitido votar mais de uma vez.",title:"Inv\xe1lido!",type:v.a.error}),this.router.navigate(["/eleicoes"]),!1)))}return this.router.navigate(["/eleicoes"]),!1}}return e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275inject"](p.a),a["\u0275\u0275inject"](r.d),a["\u0275\u0275inject"](m.a))},e.\u0275prov=a["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var O=o("KyPx");const A=[{path:"",component:j,data:{navigationType:s.b.Top},resolve:{eleicao:w.a},canActivate:[(()=>{class e{constructor(e,t,o){this.eleicoesApi=e,this.router=t,this.toasts=o}canActivate(e,t){if(e.paramMap.has("id")){const t=+e.paramMap.get("id");return this.eleicoesApi.get(t).pipe(Object(S.a)(e=>e?!(!e.etapaAtual||e.etapaAtual.etapaObrigatoriaId!==O.a.Votacao)||(this.toasts.showMessage({message:"Esta elei\xe7\xe3o n\xe3o est\xe1 no per\xedodo de vota\xe7\xe3o!",title:"Inv\xe1lido!",type:v.a.error}),this.router.navigate(["/eleicoes"]),!1):(this.toasts.showMessage({message:"Elei\xe7\xe3o n\xe3o encontrada.",title:"Inv\xe1lido!",type:v.a.error}),this.router.navigate(["/eleicoes"]),!1)))}return this.router.navigate(["/eleicoes"]),!1}}return e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275inject"](p.a),a["\u0275\u0275inject"](r.d),a["\u0275\u0275inject"](m.a))},e.\u0275prov=a["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),E]}];let x=(()=>{class e{}return e.\u0275mod=a["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=a["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.g.forChild(A)],r.g]}),e})();var C=o("PCNd");o.d(t,"VotacoesModule",(function(){return M}));let M=(()=>{class e{}return e.\u0275mod=a["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=a["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.c,C.a,x]]}),e})()}}]);