(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"2PHo":function(e,t,n){"use strict";n.r(t);var a=n("TYT/"),o=n("DUip"),i=n("GrLX"),r=n("dWir"),l=n("gbzl"),s=n("iufN"),c=n("7dP1"),u=n("xMyE"),p=n("mrSG"),d=n("T1DM"),m=n("FFOo"),f=n("G5J1"),v=n("F/XL"),g=n("XlPw"),h=function(){function e(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}},e.prototype.accept=function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)},e.prototype.toObservable=function(){switch(this.kind){case"N":return Object(v.a)(this.value);case"E":return Object(g.a)(this.error);case"C":return Object(f.b)()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}(),b=function(){function e(e,t){this.delay=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new x(e,this.delay,this.scheduler))},e}(),x=function(e){function t(t,n,a){var o=e.call(this,t)||this;return o.delay=n,o.scheduler=a,o.queue=[],o.active=!1,o.errored=!1,o}return p.__extends(t,e),t.dispatch=function(e){for(var t=e.source,n=t.queue,a=e.scheduler,o=e.destination;n.length>0&&n[0].time-a.now()<=0;)n.shift().notification.observe(o);if(n.length>0){var i=Math.max(0,n[0].time-a.now());this.schedule(e,i)}else this.unsubscribe(),t.active=!1},t.prototype._schedule=function(e){this.active=!0,this.destination.add(e.schedule(t.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))},t.prototype.scheduleNotification=function(e){if(!0!==this.errored){var t=this.scheduler,n=new E(t.now()+this.delay,e);this.queue.push(n),!1===this.active&&this._schedule(t)}},t.prototype._next=function(e){this.scheduleNotification(h.createNext(e))},t.prototype._error=function(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.scheduleNotification(h.createComplete()),this.unsubscribe()},t}(m.a),E=function(){return function(e,t){this.time=e,this.notification=t}}(),S=n("15JJ"),y=n("Valr"),C=(n("ZELa"),n("VnD/")),I=n("2WpN"),w=n("L5lq"),M=n("KyPx"),A=n("S0jo"),O=n("VNr4"),j=n("7B0N"),V=n("QJY3"),G=n("jZW9");function N(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"option",9),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;a["\u0275\u0275property"]("value",n.id),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](n.codigoGrupo)}}var F=function(){function e(e){this.gruposApi=e,this.salvandoGrupo=!1,this.selecionarGrupo=new a.EventEmitter}return e.prototype.ngOnInit=function(){var e=this;this.gruposApi.getAll().subscribe((function(t){e.grupos=t,e.codigoGrupo&&(e.grupoId=e.grupos.find((function(t){return t.codigoGrupo===e.codigoGrupo})).id)}))},e.prototype.salvar=function(){var e=this;this.selecionarGrupo.emit(this.grupos.find((function(t){return t.id===+e.grupoId})))},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](j.a))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["app-alteracao-grupo"]],inputs:{codigoGrupo:"codigoGrupo",salvandoGrupo:"salvandoGrupo"},outputs:{selecionarGrupo:"selecionarGrupo"},decls:12,vars:3,consts:[[3,"submit"],[1,"row"],[1,"col-lg-4","col-md-6","col-sm-12"],[1,"form-group"],[1,"control-label","required"],["required","","name","grupo","id","grupo",1,"form-control",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-primary",3,"ladda"],[3,"value"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("submit",(function(e){return t.salvar()})),a["\u0275\u0275elementStart"](1,"div",1),a["\u0275\u0275elementStart"](2,"div",2),a["\u0275\u0275elementStart"](3,"div",3),a["\u0275\u0275elementStart"](4,"label",4),a["\u0275\u0275text"](5,"Grupo"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"select",5),a["\u0275\u0275listener"]("ngModelChange",(function(e){return t.grupoId=e})),a["\u0275\u0275elementStart"](7,"option",6),a["\u0275\u0275text"](8,"(Selecione)"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](9,N,2,2,"option",7),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](10,"button",8),a["\u0275\u0275text"](11,"Alterar"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngModel",t.grupoId),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngForOf",t.grupos),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ladda",t.salvandoGrupo))},directives:[V["\u0275angular_packages_forms_forms_y"],V.NgControlStatusGroup,V.NgForm,V.SelectControlValueAccessor,V.RequiredValidator,V.NgControlStatus,V.NgModel,V.NgSelectOption,V["\u0275angular_packages_forms_forms_x"],y.l,G.a],styles:[""]}),e}(),k=["modalAlteracaoGrupo"];function _(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"span",13),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",n.eleicao.etapaAtual.nome," ")}}function z(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"span",14),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"date"),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" Finalizada em ",a["\u0275\u0275pipeBind2"](2,1,n.eleicao.dataFinalizacao,"dd/MMM")," ")}}function L(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"a",17),a["\u0275\u0275listener"]("click",(function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"](2).alterarGrupo()})),a["\u0275\u0275element"](1,"span",18),a["\u0275\u0275elementEnd"]()}}function P(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div"),a["\u0275\u0275text"](1," Grupo: "),a["\u0275\u0275elementStart"](2,"strong",15),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](4,L,2,0,"a",16),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](n.eleicao.grupo),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",!n.eleicao.dataFinalizacao)}}function D(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"span"),a["\u0275\u0275element"](1,"span",5),a["\u0275\u0275text"](2," Inscri\xe7\xf5es: de "),a["\u0275\u0275elementStart"](3,"strong"),a["\u0275\u0275text"](4),a["\u0275\u0275pipe"](5,"date"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](6," a "),a["\u0275\u0275elementStart"](7,"strong"),a["\u0275\u0275text"](8),a["\u0275\u0275pipe"](9,"date"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind2"](5,2,n.eleicao.inicioInscricao,"dd/MMM")),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind2"](9,5,n.eleicao.terminoInscricao,"dd/MMM"))}}function T(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"span"),a["\u0275\u0275element"](1,"br"),a["\u0275\u0275element"](2,"span",5),a["\u0275\u0275text"](3," Vota\xe7\xe3o: de "),a["\u0275\u0275elementStart"](4,"strong"),a["\u0275\u0275text"](5),a["\u0275\u0275pipe"](6,"date"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](7," a "),a["\u0275\u0275elementStart"](8,"strong"),a["\u0275\u0275text"](9),a["\u0275\u0275pipe"](10,"date"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](5),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind2"](6,2,n.eleicao.inicioVotacao,"dd/MMM")),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind2"](10,5,n.eleicao.terminoVotacao,"dd/MMM"))}}function q(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div"),a["\u0275\u0275template"](1,D,10,8,"span",10),a["\u0275\u0275template"](2,T,11,8,"span",10),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",!n.eleicao.inscricoesFinalizadas),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",!n.eleicao.votacaoFinalizada)}}function R(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div"),a["\u0275\u0275element"](1,"br"),a["\u0275\u0275text"](2," Seu voto foi registrado em "),a["\u0275\u0275elementStart"](3,"strong"),a["\u0275\u0275text"](4),a["\u0275\u0275pipe"](5,"date"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](6,". "),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind2"](5,1,n.eleicao.voto.horario,"dd/MMM HH:mm"))}}function B(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div"),a["\u0275\u0275element"](1,"br"),a["\u0275\u0275text"](2," Status da Inscri\xe7\xe3o: "),a["\u0275\u0275elementStart"](3,"span",21),a["\u0275\u0275text"](4),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"](3);a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngClass",n.labelStatusClass),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](n.eleicao.candidato.statusAprovacao)}}function U(e,t){if(1&e&&a["\u0275\u0275template"](0,B,5,2,"div",10),2&e){var n=a["\u0275\u0275nextContext"](2);a["\u0275\u0275property"]("ngIf",n.eleicao.candidato)}}function Q(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div"),a["\u0275\u0275template"](1,R,7,4,"div",19),a["\u0275\u0275template"](2,U,1,1,"ng-template",null,20,a["\u0275\u0275templateRefExtractor"]),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275reference"](3),o=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",o.eleicao.voto)("ngIfElse",n)}}function J(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"a",25),a["\u0275\u0275element"](1,"span",26),a["\u0275\u0275text"](2," Configurar"),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"](2);a["\u0275\u0275property"]("routerLink","/eleicoes/"+n.eleicao.id+"/configuracao")}}function W(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",27),a["\u0275\u0275listener"]("click",(function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"](2).excluirEleicao()})),a["\u0275\u0275element"](1,"span",28),a["\u0275\u0275text"](2," Excluir"),a["\u0275\u0275elementEnd"]()}}function X(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"span"),a["\u0275\u0275elementStart"](1,"a",22),a["\u0275\u0275element"](2,"span",5),a["\u0275\u0275text"](3," Acessar"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](4,J,3,1,"a",23),a["\u0275\u0275template"](5,W,3,0,"button",24),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("routerLink","/eleicoes/"+n.eleicao.id+"/cronograma"),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf",!n.eleicao.dataFinalizacao),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",!n.eleicao.etapaAtual&&!n.eleicao.dataFinalizacao)}}function Y(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"span"),a["\u0275\u0275elementStart"](1,"a",30),a["\u0275\u0275element"](2,"span",31),a["\u0275\u0275text"](3," Votar "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"](3);a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("routerLink","/eleicoes/"+n.eleicao.id+"/votacao")}}function Z(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"span"),a["\u0275\u0275template"](1,Y,4,1,"span",10),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",!n.eleicao.voto&&(null==n.eleicao.etapaAtual?null:n.eleicao.etapaAtual.etapaObrigatoriaId)===n.CodigoEtapaObrigatoria.Votacao)}}function H(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"span"),a["\u0275\u0275elementStart"](1,"a",30),a["\u0275\u0275element"](2,"span",33),a["\u0275\u0275text"](3," Minha Inscri\xe7\xe3o "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"](3);a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("routerLink","/eleicoes/"+n.eleicao.id+"/inscricoes/nova")}}function $(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"span"),a["\u0275\u0275elementStart"](1,"a",34),a["\u0275\u0275element"](2,"span",33),a["\u0275\u0275text"](3," Inscreva-se! "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"](4);a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("routerLink","/eleicoes/"+n.eleicao.id+"/inscricoes/nova")}}function K(e,t){if(1&e&&a["\u0275\u0275template"](0,$,4,1,"span",10),2&e){var n=a["\u0275\u0275nextContext"](3);a["\u0275\u0275property"]("ngIf",(null==n.eleicao.etapaAtual?null:n.eleicao.etapaAtual.etapaObrigatoriaId)===n.CodigoEtapaObrigatoria.Inscricao)}}function ee(e,t){if(1&e&&(a["\u0275\u0275template"](0,H,4,1,"span",19),a["\u0275\u0275template"](1,K,1,1,"ng-template",null,32,a["\u0275\u0275templateRefExtractor"])),2&e){var n=a["\u0275\u0275reference"](2),o=a["\u0275\u0275nextContext"](2);a["\u0275\u0275property"]("ngIf",o.eleicao.candidato)("ngIfElse",n)}}function te(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"span"),a["\u0275\u0275template"](1,Z,2,1,"span",19),a["\u0275\u0275template"](2,ee,3,2,"ng-template",null,29,a["\u0275\u0275templateRefExtractor"]),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275reference"](3),o=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",o.eleicao.inscricoesFinalizadas)("ngIfElse",n)}}function ne(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"app-alteracao-grupo",35),a["\u0275\u0275listener"]("selecionarGrupo",(function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().salvarGrupo(e)})),a["\u0275\u0275elementEnd"]()}if(2&e){var o=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("codigoGrupo",o.eleicao.grupo)("salvandoGrupo",o.salvandoGrupo)}}var ae=function(){function e(e,t,n,o){this.toast=e,this.authService=t,this.modalService=n,this.eleicoesApi=o,this.excluir=new a.EventEmitter,this.StatusAprovacao=w.c,this.CodigoEtapaObrigatoria=M.a,this.salvandoGrupo=!1}return e.prototype.ngOnInit=function(){var e=this;this.eleicao&&!this.eleicao.dataFinalizacao&&this.eleicoesApi.getUsuarioEhEleitor(this.eleicao.id).pipe(Object(u.a)((function(t){return e.eleicao.usuarioEleitor=t})),Object(C.a)((function(t){return t&&e.eleicaoJaPassouDasInscricoes})),Object(S.a)((function(t){return Object(O.a)({candidato:e.eleicoesApi.getInscricaoUsuario(e.eleicao.id),voto:e.eleicoesApi.getVotoUsuario(e.eleicao.id)})}))).subscribe((function(t){e.eleicao.candidato=t.candidato,e.eleicao.voto=t.voto}))},Object.defineProperty(e.prototype,"perfilComAcesso",{get:function(){return this.authService.tokenValido&&(this.authService.authInfo.perfil===s.a.SESMT||this.authService.authInfo.perfil===s.a.Administrador)},enumerable:!0,configurable:!0}),e.prototype.excluirEleicao=function(){var e=this;this.toast.confirmModal("Tem certeza que deseja excluir essa elei\xe7\xe3o? Essa a\xe7\xe3o n\xe3o poder\xe1 ser desfeita","Confirma\xe7\xe3o").pipe(Object(C.a)((function(e){return e}))).subscribe((function(t){return e.excluir.emit(e.eleicao)}))},Object.defineProperty(e.prototype,"labelStatusClass",{get:function(){if(!this.eleicao||!this.eleicao.candidato)return"";switch(this.eleicao.candidato.statusAprovacao){case w.c.Aprovada:return"label-primary";case w.c.Pendente:return"label-warning";case w.c.Reprovada:return"label-danger";default:return""}},enumerable:!0,configurable:!0}),e.prototype.alterarGrupo=function(){this.modalService.showModal(this.modalAlteracaoGrupo,"Alterar Grupo da Elei\xe7\xe3o")},e.prototype.salvarGrupo=function(e){var t=this;this.salvandoGrupo=!0,this.eleicao.grupoId=e.id,this.eleicoesApi.put(this.eleicao.id,this.eleicao).pipe(Object(I.a)((function(){return t.salvandoGrupo=!1}))).subscribe((function(n){t.eleicao.grupoId=e.id,t.eleicao.grupo=e.codigoGrupo,t.toast.showMessage({message:"Grupo alterado com sucesso!",title:"Sucesso",type:l.a.success}),t.modalService.closeModal()}))},Object.defineProperty(e.prototype,"eleicaoJaPassouDasInscricoes",{get:function(){return this.eleicao.inscricoesFinalizadas||this.eleicao.etapaAtual&&this.eleicao.etapaAtual.etapaObrigatoriaId===M.a.Inscricao},enumerable:!0,configurable:!0}),e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](r.a),a["\u0275\u0275directiveInject"](c.a),a["\u0275\u0275directiveInject"](A.a),a["\u0275\u0275directiveInject"](i.a))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["app-eleicao-card"]],viewQuery:function(e,t){var n;1&e&&a["\u0275\u0275viewQuery"](k,!0),2&e&&a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.modalAlteracaoGrupo=n.first)},inputs:{eleicao:"eleicao"},outputs:{excluir:"excluir"},decls:30,vars:13,consts:[[1,"ibox"],[1,"ibox-content","product-box"],[1,"product-desc"],["class","label label-success float-right",4,"ngIf"],["class","label label-primary float-right",4,"ngIf"],[1,"fa","fa-calendar"],[1,"fa","fa-map-marker"],[3,"hidden"],[1,"fa","fa-info"],[1,"fa","fa-home"],[4,"ngIf"],[1,"actions"],["modalAlteracaoGrupo",""],[1,"label","label-success","float-right"],[1,"label","label-primary","float-right"],[1,"label","label-warning"],["class","m-l-sm",3,"click",4,"ngIf"],[1,"m-l-sm",3,"click"],[1,"fa","fa-pencil"],[4,"ngIf","ngIfElse"],["naoVotou",""],[1,"label",3,"ngClass"],[1,"btn","btn-success","btn-outline","m-r-sm",3,"routerLink"],["class","btn btn-primary btn-outline m-r-sm",3,"routerLink",4,"ngIf"],["class","btn btn-outline-danger",3,"click",4,"ngIf"],[1,"btn","btn-primary","btn-outline","m-r-sm",3,"routerLink"],[1,"fa","fa-cogs"],[1,"btn","btn-outline-danger",3,"click"],[1,"fa","fa-trash"],["inscricaoNaoFinalizada",""],[1,"btn","btn-outline","btn-success","m-r-sm",3,"routerLink"],[1,"fa","fa-thumbs-up"],["naoInscrito",""],[1,"fa","fa-user"],[1,"btn","btn-outline","btn-primary","m-r-sm",3,"routerLink"],[3,"codigoGrupo","salvandoGrupo","selecionarGrupo"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"div",1),a["\u0275\u0275elementStart"](2,"div",2),a["\u0275\u0275elementStart"](3,"h4"),a["\u0275\u0275text"](4),a["\u0275\u0275template"](5,_,2,1,"span",3),a["\u0275\u0275template"](6,z,3,4,"span",4),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](7,"p"),a["\u0275\u0275element"](8,"span",5),a["\u0275\u0275elementStart"](9,"strong"),a["\u0275\u0275text"](10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](11,"br"),a["\u0275\u0275element"](12,"span",6),a["\u0275\u0275text"](13),a["\u0275\u0275element"](14,"br"),a["\u0275\u0275elementStart"](15,"span",7),a["\u0275\u0275element"](16,"span",8),a["\u0275\u0275text"](17),a["\u0275\u0275element"](18,"br"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](19,"span",9),a["\u0275\u0275text"](20),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](21,P,5,2,"div",10),a["\u0275\u0275template"](22,q,3,2,"div",10),a["\u0275\u0275template"](23,Q,4,2,"div",10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](24,"div",11),a["\u0275\u0275template"](25,X,6,3,"span",10),a["\u0275\u0275template"](26,te,4,2,"span",10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](27,ne,1,2,"ng-template",null,12,a["\u0275\u0275templateRefExtractor"]),a["\u0275\u0275element"](29,"router-outlet")),2&e&&(a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate1"]("",null==t.eleicao.estabelecimento?null:null==t.eleicao.estabelecimento.empresa?null:t.eleicao.estabelecimento.empresa.razaoSocial," "),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.eleicao.etapaAtual),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",!t.eleicao.etapaAtual&&t.eleicao.dataFinalizacao),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate1"](" ",t.eleicao.gestao,""),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",null==t.eleicao.estabelecimento?null:t.eleicao.estabelecimento.endereco,""),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("hidden",!(null!=t.eleicao.estabelecimento&&t.eleicao.estabelecimento.descricao)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",null==t.eleicao.estabelecimento?null:t.eleicao.estabelecimento.descricao,""),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",null==t.eleicao.estabelecimento?null:t.eleicao.estabelecimento.cidade," "),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.perfilComAcesso),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",!t.perfilComAcesso),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.eleicao.usuarioEleitor),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",t.perfilComAcesso),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.eleicao.usuarioEleitor))},directives:[y.m,o.h,y.k,o.f,F],pipes:[y.e],styles:[".ibox[_ngcontent-%COMP%]{height:100%;margin-bottom:0}.ibox-content[_ngcontent-%COMP%], .product-desc[_ngcontent-%COMP%]{display:flex;flex:1 0 auto;flex-direction:column}.ibox-content[_ngcontent-%COMP%]{padding-bottom:20px}.product-box[_ngcontent-%COMP%]{height:100%}.actions[_ngcontent-%COMP%]{margin-left:20px}.label[_ngcontent-%COMP%]{font-size:11px;font-weight:400}"]}),e}();function oe(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",4),a["\u0275\u0275elementStart"](1,"div",5),a["\u0275\u0275elementStart"](2,"a",6),a["\u0275\u0275text"](3,"Nova Elei\xe7\xe3o "),a["\u0275\u0275element"](4,"em",7),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]())}function ie(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"h4"),a["\u0275\u0275text"](1,"Elei\xe7\xf5es em Andamento"),a["\u0275\u0275elementEnd"]())}function re(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"h4"),a["\u0275\u0275text"](1,"Nenhuma elei\xe7\xe3o em andamento"),a["\u0275\u0275elementEnd"]())}function le(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"h4"),a["\u0275\u0275text"](1,"Carregando elei\xe7\xf5es..."),a["\u0275\u0275elementEnd"]())}function se(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",8),a["\u0275\u0275elementStart"](1,"app-eleicao-card",9),a["\u0275\u0275listener"]("excluir",(function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().excluir(e)})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("eleicao",o)}}function ce(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"h4"),a["\u0275\u0275text"](1,"Elei\xe7\xf5es Finalizadas"),a["\u0275\u0275elementEnd"]())}function ue(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"h4"),a["\u0275\u0275text"](1,"Nenhuma elei\xe7\xe3o finalizada no hist\xf3rico"),a["\u0275\u0275elementEnd"]())}function pe(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"h4"),a["\u0275\u0275text"](1,"Carregando elei\xe7\xf5es finalizadas..."),a["\u0275\u0275elementEnd"]())}function de(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",8),a["\u0275\u0275element"](1,"app-eleicao-card",10),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("eleicao",n)}}var me=function(){function e(e,t,n){this.eleicoesApi=e,this.toast=t,this.authService=n,this.Perfil=s.a}return e.prototype.ngOnInit=function(){this.authInfo=this.authService.authInfo,this.carregaEleicoes()},e.prototype.carregaEleicoes=function(){var e=this;this.eleicoesApi.getAll({status:"aberta"}).pipe(Object(u.a)((function(t){e.eleicoes=t})),function(e,t){void 0===t&&(t=d.a);var n=500 instanceof Date&&!isNaN(500)?500-t.now():Math.abs(500);return function(e){return e.lift(new b(n,t))}}(),Object(S.a)((function(t){return e.eleicoesApi.getAll({status:"finalizada"})}))).subscribe((function(t){e.eleicoesFinalizadas=t}))},e.prototype.buscaEleicao=function(e){return this.eleicoes.find((function(t){return t.id===e}))},e.prototype.excluir=function(e){var t=this;this.eleicoesApi.delete(e.id).subscribe((function(e){t.toast.showMessage({message:"Elei\xe7\xe3o exclu\xedda com sucesso!",title:"Sucesso",type:l.a.success}),t.carregaEleicoes()}))},Object.defineProperty(e.prototype,"perfilComAcessoCriacao",{get:function(){return this.authInfo&&(this.authInfo.perfil===s.a.SESMT||this.authInfo.perfil===s.a.Administrador)},enumerable:!0,configurable:!0}),e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](i.a),a["\u0275\u0275directiveInject"](r.a),a["\u0275\u0275directiveInject"](c.a))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["app-eleicoes-lista"]],decls:12,vars:9,consts:[["class","row m-b-md",4,"ngIf"],[4,"ngIf"],[1,"row","flex-row"],["class","col-lg-4 col-md-6 col-xs-12",4,"ngFor","ngForOf"],[1,"row","m-b-md"],[1,"col-md-12"],["routerLink","/eleicoes/nova",1,"btn","btn-primary"],[1,"fa","fa-plus"],[1,"col-lg-4","col-md-6","col-xs-12"],[3,"eleicao","excluir"],[3,"eleicao"]],template:function(e,t){1&e&&(a["\u0275\u0275template"](0,oe,5,0,"div",0),a["\u0275\u0275template"](1,ie,2,0,"h4",1),a["\u0275\u0275template"](2,re,2,0,"h4",1),a["\u0275\u0275template"](3,le,2,0,"h4",1),a["\u0275\u0275elementStart"](4,"div",2),a["\u0275\u0275template"](5,se,2,1,"div",3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](6,"hr"),a["\u0275\u0275template"](7,ce,2,0,"h4",1),a["\u0275\u0275template"](8,ue,2,0,"h4",1),a["\u0275\u0275template"](9,pe,2,0,"h4",1),a["\u0275\u0275elementStart"](10,"div",2),a["\u0275\u0275template"](11,de,2,1,"div",3),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275property"]("ngIf",t.perfilComAcessoCriacao),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.eleicoes&&t.eleicoes.length),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.eleicoes&&!t.eleicoes.length),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",!t.eleicoes),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",t.eleicoes),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",t.eleicoesFinalizadas&&t.eleicoesFinalizadas.length),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.eleicoesFinalizadas&&!t.eleicoesFinalizadas.length),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",!t.eleicoesFinalizadas),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",t.eleicoesFinalizadas))},directives:[y.m,y.l,o.f,ae],styles:[".widget[_ngcontent-%COMP%]{border:1px solid #ddd;height:100%}@media (max-width:400px){.tabs-container[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%] > li.active[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{border-bottom:1px solid #e7eaec!important;margin:0}}app-eleicao-card[_ngcontent-%COMP%]{height:100%;margin-bottom:20px}"]}),e}(),fe=n("Sy1n"),ve=n("wP9F"),ge=n("zzFV"),he=n("Onx1"),be=n("CWrn"),xe=n("UdTj"),Ee=n("Xxc3"),Se=n("VfTn"),ye=n("IEi8"),Ce=["form"],Ie=function(){function e(e){this.toasts=e,this.statusChange=new a.EventEmitter,this.intervaloDatas=60}return e.prototype.ngOnInit=function(){var e=this,t=new Date;this.gestao.dataInicio=new Date(t),this.gestao.terminoMandatoAnterior=new Date(t.setDate(t.getDate()+this.intervaloDatas)),this.formGestao.statusChanges.subscribe((function(t){return e.statusChange.emit("VALID"===t)}))},e.prototype.atualizaDataInicio=function(e){this.inicioMaximo(e)<this.gestao.dataInicio&&(this.gestao.dataInicio=this.inicioMaximo(e))},e.prototype.validaDataInicio=function(e){e>this.inicioMaximo(this.gestao.terminoMandatoAnterior)&&(this.toasts.showMessage({message:"O in\xedcio do processo deve ser no m\xednimo "+this.intervaloDatas+" dias antes do t\xe9rmino do mandato anterior.",title:"Data Inv\xe1lida!",type:l.a.error}),this.gestao.dataInicio=this.inicioMaximo(this.gestao.terminoMandatoAnterior))},e.prototype.inicioMaximo=function(e){var t=new Date(e);return new Date(t.setDate(t.getDate()-this.intervaloDatas))},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](r.a))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["app-gestao-form"]],viewQuery:function(e,t){var n;1&e&&a["\u0275\u0275staticViewQuery"](Ce,!0),2&e&&a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.formGestao=n.first)},inputs:{gestao:"gestao"},outputs:{statusChange:"statusChange"},decls:14,vars:5,consts:[["form","ngForm"],[1,"row"],[1,"col-md-6","col-sm-12"],["name","terminoMandatoAnterior","inputClasses","input-white","id","mandatoAnterior",3,"ngModel","control","ngModelChange","change"],["terminoMandatoAnterior","ngModel"],["ajuda","O in\xedcio do processo deve ser no m\xednimo 60 dias antes do t\xe9rmino do mandato anterior."],["required","","name","dataInicio","inputClasses","input-white","id","inicioProcesso",3,"ngModel","control","ngModelChange","change"],["dataInicio","ngModel"],["type","hidden","name","duracaoGestao",3,"ngModel","ngModelChange"]],template:function(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"form",null,0),a["\u0275\u0275elementStart"](2,"div",1),a["\u0275\u0275elementStart"](3,"div",2),a["\u0275\u0275text"](4," Data de T\xe9rmino do mandato Anterior "),a["\u0275\u0275elementStart"](5,"app-datepicker",3,4),a["\u0275\u0275listener"]("ngModelChange",(function(e){return t.gestao.terminoMandatoAnterior=e}))("change",(function(e){return t.atualizaDataInicio(e)})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](7,"div",1),a["\u0275\u0275elementStart"](8,"div",2),a["\u0275\u0275text"](9," Data de In\xedcio do processo de Elei\xe7\xe3o "),a["\u0275\u0275element"](10,"app-ajuda-tooltip",5),a["\u0275\u0275elementStart"](11,"app-datepicker",6,7),a["\u0275\u0275listener"]("ngModelChange",(function(e){return t.gestao.dataInicio=e}))("change",(function(e){return t.validaDataInicio(e)})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](13,"input",8),a["\u0275\u0275listener"]("ngModelChange",(function(e){return t.gestao.duracaoGestao=e})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275reference"](6),o=a["\u0275\u0275reference"](12);a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngModel",t.gestao.terminoMandatoAnterior)("control",n),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngModel",t.gestao.dataInicio)("control",o),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngModel",t.gestao.duracaoGestao)}},directives:[V["\u0275angular_packages_forms_forms_y"],V.NgControlStatusGroup,V.NgForm,Se.a,V.NgControlStatus,V.NgModel,ye.a,V.RequiredValidator,V.DefaultValueAccessor],styles:[""]}),e}(),we=n("vcDO"),Me=n("ijvc");function Ae(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div"),a["\u0275\u0275elementStart"](1,"app-gestao-form",4),a["\u0275\u0275listener"]("statusChange",(function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().formGestaoStatusChange(e)})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var o=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("gestao",o.gestao)}}function Oe(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"span"),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" Observamos que voc\xea j\xe1 possui ",n.empresas.length," empresas cadastradas. Escolha uma delas para iniciar a nova elei\xe7\xe3o, ou cadastre uma nova empresa. ")}}function je(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"span"),a["\u0275\u0275text"](1,' Voc\xea possui somente 1 empresa cadastrada, a qual j\xe1 selecionamos pra voc\xea. Se n\xe3o for essa a empresa, clique em "Nova Empresa". '),a["\u0275\u0275elementEnd"]())}function Ve(e,t){1&e&&a["\u0275\u0275text"](0,' Ainda n\xe3o h\xe1 nenhuma empresa cadastrado. Clique em "Nova Empresa". ')}function Ge(e,t){if(1&e&&(a["\u0275\u0275template"](0,je,2,0,"span",7),a["\u0275\u0275template"](1,Ve,1,0,"ng-template",null,17,a["\u0275\u0275templateRefExtractor"])),2&e){var n=a["\u0275\u0275reference"](2),o=a["\u0275\u0275nextContext"](2);a["\u0275\u0275property"]("ngIf",1===o.empresas.length)("ngIfElse",n)}}function Ne(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"option",18),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;a["\u0275\u0275property"]("value",n.id),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](n.razaoSocial)}}function Fe(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div"),a["\u0275\u0275elementStart"](1,"div",5),a["\u0275\u0275elementStart"](2,"div",6),a["\u0275\u0275template"](3,Oe,2,1,"span",7),a["\u0275\u0275template"](4,Ge,3,2,"ng-template",null,8,a["\u0275\u0275templateRefExtractor"]),a["\u0275\u0275elementStart"](6,"form",9),a["\u0275\u0275elementStart"](7,"div",5),a["\u0275\u0275elementStart"](8,"div",10),a["\u0275\u0275elementStart"](9,"select",11),a["\u0275\u0275elementStart"](10,"option",12),a["\u0275\u0275text"](11,"(Selecione a empresa)"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](12,Ne,2,2,"option",13),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](13,"button",14),a["\u0275\u0275listener"]("click",(function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().empresaForm()})),a["\u0275\u0275element"](14,"i",15),a["\u0275\u0275text"](15," Nova Empresa"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](16,"div",6),a["\u0275\u0275elementStart"](17,"app-empresa-shared-form",16),a["\u0275\u0275listener"]("cancelarEdicao",(function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().cancelarEmpresa()}))("salvarEmpresa",(function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().salvarEmpresa(e)})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var o=a["\u0275\u0275reference"](5),i=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("hidden",i.novaEmpresa),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",i.empresas.length>1)("ngIfElse",o),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("formGroup",i.formListaEmpresa),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngForOf",i.empresas),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("hidden",!i.novaEmpresa)}}function ke(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div"),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" A empresa selecionada possui ",n.estabelecimentos.length," estabelecimentos. Selecione um deles ou cadastre um novo estabelecimento. ")}}function _e(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"span"),a["\u0275\u0275text"](1,' Ainda n\xe3o h\xe1 nenhum estabelecimento cadastrado. Clique em "Novo Estabelecimento". '),a["\u0275\u0275elementEnd"]())}function ze(e,t){1&e&&(a["\u0275\u0275text"](0," A empresa selecionada j\xe1 possui 1 estabelecimento cadastrado. J\xe1 selecionamos ele para voc\xea."),a["\u0275\u0275element"](1,"br"),a["\u0275\u0275text"](2," Se precisar cadastrar um novo estabelecimento, basta clicar no bot\xe3o abaixo. "))}function Le(e,t){if(1&e&&(a["\u0275\u0275template"](0,_e,2,0,"span",7),a["\u0275\u0275template"](1,ze,3,0,"ng-template",null,24,a["\u0275\u0275templateRefExtractor"])),2&e){var n=a["\u0275\u0275reference"](2),o=a["\u0275\u0275nextContext"](2);a["\u0275\u0275property"]("ngIf",!o.estabelecimentos.length)("ngIfElse",n)}}function Pe(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"option",18),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;a["\u0275\u0275property"]("value",n.id),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",n.cidade+", "+n.endereco,"")}}function De(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",25),a["\u0275\u0275elementStart"](1,"div",26),a["\u0275\u0275elementStart"](2,"div",27),a["\u0275\u0275text"](3," Grupo: "),a["\u0275\u0275elementStart"](4,"strong"),a["\u0275\u0275text"](5),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](5),a["\u0275\u0275textInterpolate"](null==n.estabelecimentoSelecionado?null:n.estabelecimentoSelecionado.grupo)}}var Te=function(e){return[e]};function qe(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div"),a["\u0275\u0275elementStart"](1,"div",5),a["\u0275\u0275elementStart"](2,"div",6),a["\u0275\u0275template"](3,ke,2,1,"div",7),a["\u0275\u0275template"](4,Le,3,2,"ng-template",null,19,a["\u0275\u0275templateRefExtractor"]),a["\u0275\u0275elementStart"](6,"form",9),a["\u0275\u0275elementStart"](7,"div",5),a["\u0275\u0275elementStart"](8,"div",20),a["\u0275\u0275elementStart"](9,"select",21),a["\u0275\u0275elementStart"](10,"option",12),a["\u0275\u0275text"](11,"(Selecione o estabelecimento)"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](12,Pe,2,2,"option",13),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](13,De,6,1,"div",22),a["\u0275\u0275elementStart"](14,"button",14),a["\u0275\u0275listener"]("click",(function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().estabelecimentoForm()})),a["\u0275\u0275element"](15,"i",15),a["\u0275\u0275text"](16," Novo Estabelecimento"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](17,"div",6),a["\u0275\u0275elementStart"](18,"app-estabelecimento-shared-form",23),a["\u0275\u0275listener"]("cancelarEdicao",(function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().cancelarEstabelecimento()}))("salvarEstabelecimento",(function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().salvarEstabelecimento(e)})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var o=a["\u0275\u0275reference"](5),i=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("hidden",i.novoEstabelecimento),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",i.estabelecimentos.length>1)("ngIfElse",o),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("formGroup",i.formListaEstabelecimentos),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngForOf",i.estabelecimentos),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",i.estabelecimentoSelecionado),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("hidden",!i.novoEstabelecimento),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("empresas",a["\u0275\u0275pureFunction1"](9,Te,i.empresaSelecionada))("estabelecimento",i.estabelecimento)}}var Re=function(){function e(e,t,n,a,o,i,r,l,s){this.route=e,this.empresasApi=t,this.estabelecimentosApi=n,this.formBuilder=a,this.eleicoesApi=o,this.router=i,this.toasts=r,this.gruposApi=l,this.navigationService=s,this.steps=["Gest\xe3o","Empresa","Estabelecimento"],this.currentStepIndex=1,this.gestao={dataInicio:new Date,duracaoGestao:2},this.estabelecimentos=[],this.estabelecimento=new ge.a,this.empresas=[],this.novaEmpresa=!1,this.novoEstabelecimento=!1}return e.prototype.ngOnInit=function(){var e=this;this.route.data.subscribe((function(t){t.hasOwnProperty("eleicao")&&(e.eleicao=t.eleicao)})),this.empresasApi.getAll().subscribe((function(t){e.empresas=t,e.empresas.length||(e.novaEmpresa=!0),1===e.empresas.length&&e.formListaEmpresa.get("empresa").setValue(e.empresas[0].id)})),this.formListaEmpresa=this.formBuilder.group({empresa:["",V.Validators.required]}),this.formListaEmpresa.get("empresa").valueChanges.pipe(Object(u.a)((function(t){e.estabelecimento.empresaId=t,t||(e.estabelecimentos=[])})),Object(C.a)((function(e){return e})),Object(S.a)((function(t){return e.estabelecimentosApi.getAll({empresaId:t})}))).subscribe((function(t){e.estabelecimentos=t,e.estabelecimentos.length?1===e.estabelecimentos.length&&e.formListaEstabelecimentos.get("estabelecimento").setValue(e.estabelecimentos[0].id):e.novoEstabelecimento=!0})),this.formListaEstabelecimentos=this.formBuilder.group({estabelecimento:["",V.Validators.required]}),this.gruposApi.getAll().subscribe((function(t){e.grupos=t}))},e.prototype.formGestaoStatusChange=function(e){this.formGestaoValid=e},Object.defineProperty(e.prototype,"validNext",{get:function(){switch(this.currentStepIndex){case 1:return this.formGestaoValid;case 2:return this.formListaEmpresa.valid;case 3:return this.formListaEstabelecimentos.valid;case 4:return!0;default:return!1}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"empresaSelecionada",{get:function(){var e=this;return this.empresas.find((function(t){return t.id===+e.formListaEmpresa.get("empresa").value}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"estabelecimentoSelecionado",{get:function(){var e=this.formListaEstabelecimentos.get("estabelecimento").value;if(!e)return null;var t=+e;return this.estabelecimentos.find((function(e){return e.id===t}))},enumerable:!0,configurable:!0}),e.prototype.changeStep=function(e){this.currentStepIndex=e},e.prototype.empresaForm=function(){this.novaEmpresa=!0},e.prototype.salvarEmpresa=function(e){var t=this;this.empresasApi.post(e).subscribe((function(e){t.novaEmpresa=!1,t.empresas.push(e),t.formListaEmpresa.get("empresa").setValue(e.id)}))},e.prototype.cancelarEmpresa=function(){this.novaEmpresa=!1},e.prototype.estabelecimentoForm=function(){this.novoEstabelecimento=!0},e.prototype.salvarEstabelecimento=function(e){var t=this;this.estabelecimentosApi.post(e).subscribe((function(e){t.novoEstabelecimento=!1,t.estabelecimentos.push(e),t.formListaEstabelecimentos.get("estabelecimento").setValue(e.id)}))},e.prototype.cancelarEstabelecimento=function(){this.novoEstabelecimento=!1},e.prototype.salvarEleicao=function(){var e=this,t=Object(p.__assign)(Object(p.__assign)({},this.gestao),{gestao:this.gestao.dataInicio.getFullYear(),estabelecimentoId:this.formListaEstabelecimentos.get("estabelecimento").value,grupoId:this.estabelecimentoSelecionado.grupoId});this.eleicoesApi.post(t).subscribe((function(t){e.toasts.showMessage({message:"Elei\xe7\xe3o aberta com sucesso!",title:"Sucesso!",type:l.a.success}),e.router.navigate(["/eleicoes/"+t.id+"/cronograma"])}))},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](o.a),a["\u0275\u0275directiveInject"](ve.a),a["\u0275\u0275directiveInject"](he.a),a["\u0275\u0275directiveInject"](V.FormBuilder),a["\u0275\u0275directiveInject"](i.a),a["\u0275\u0275directiveInject"](o.d),a["\u0275\u0275directiveInject"](r.a),a["\u0275\u0275directiveInject"](j.a),a["\u0275\u0275directiveInject"](be.a))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["app-eleicao-nova"]],decls:11,vars:6,consts:[[1,"container"],["saveButtonText","Abrir Elei\xe7\xe3o!",3,"steps","validNext","changeStep","finalize"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"gestao","statusChange"],[1,"row"],[1,"col-md-12",3,"hidden"],[4,"ngIf","ngIfElse"],["empresaUnica",""],[3,"formGroup"],[1,"col-lg-4","col-md-6","col-sm-12"],["name","lista-empresa","id","lista-empresa","formControlName","empresa",1,"form-control","m-t-sm"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-primary","m-t-md",3,"click"],[1,"fa","fa-plus"],[3,"cancelarEdicao","salvarEmpresa"],["nenhumaEmpresa",""],[3,"value"],["estabelecimentoUnico",""],[1,"col-lg-6","col-md-8","col-sm-12"],["name","lista-estabelecimento","id","lista-estabelecimento","formControlName","estabelecimento",1,"form-control","m-t-sm"],["class","row m-t-md",4,"ngIf"],[3,"empresas","estabelecimento","cancelarEdicao","salvarEstabelecimento"],["nenhumEstabelecimento",""],[1,"row","m-t-md"],[1,"col-sm-12","col-md-4","col-lg-3"],[1,"alert","alert-info"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"h2"),a["\u0275\u0275text"](2,"Abertura de Nova Elei\xe7\xe3o"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](3,"p"),a["\u0275\u0275text"](4," Para abrir uma nova elei\xe7\xe3o, basta seguir os passos abaixo. "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"app-panel"),a["\u0275\u0275elementStart"](6,"app-wizard",1),a["\u0275\u0275listener"]("changeStep",(function(e){return t.changeStep(e)}))("finalize",(function(e){return t.salvarEleicao()})),a["\u0275\u0275elementStart"](7,"div",2),a["\u0275\u0275template"](8,Ae,2,1,"div",3),a["\u0275\u0275template"](9,Fe,18,6,"div",3),a["\u0275\u0275template"](10,qe,19,11,"div",3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("steps",t.steps)("validNext",t.validNext),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitch",t.currentStepIndex),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",1),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",2),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",3))},directives:[xe.a,Ee.a,y.n,y.o,Ie,y.m,V["\u0275angular_packages_forms_forms_y"],V.NgControlStatusGroup,V.FormGroupDirective,V.SelectControlValueAccessor,V.NgControlStatus,V.FormControlName,V.NgSelectOption,V["\u0275angular_packages_forms_forms_x"],y.l,we.a,Me.a],styles:[""]}),e}(),Be=n("LOG3"),Ue=n("KVHF"),Qe=n("pugT"),Je=n("67Y/"),We=n("t9fZ"),Xe=["modalConfiguracao"];function Ye(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"h5"),a["\u0275\u0275text"](1,"Habilitar envio autom\xe1tico de e-mails para:"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](2,"input",1),a["\u0275\u0275listener"]("ngModelChange",(function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().eleicao.configuracao.envioEditalConvocao=e})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](3," Edital de Convoca\xe7\xe3o"),a["\u0275\u0275element"](4,"br"),a["\u0275\u0275elementStart"](5,"input",1),a["\u0275\u0275listener"]("ngModelChange",(function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().eleicao.configuracao.envioConviteInscricao=e})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](6," Convite para Inscri\xe7\xf5es"),a["\u0275\u0275element"](7,"br"),a["\u0275\u0275elementStart"](8,"input",1),a["\u0275\u0275listener"]("ngModelChange",(function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().eleicao.configuracao.envioConviteVotacao=e})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](9," Convite para Vota\xe7\xe3o"),a["\u0275\u0275element"](10,"br"),a["\u0275\u0275elementStart"](11,"button",2),a["\u0275\u0275listener"]("click",(function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().salvarConfiguracoes()})),a["\u0275\u0275element"](12,"span",3),a["\u0275\u0275text"](13," Salvar Configura\xe7\xf5es"),a["\u0275\u0275elementEnd"]()}if(2&e){var o=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngModel",o.eleicao.configuracao.envioEditalConvocao),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngModel",o.eleicao.configuracao.envioConviteInscricao),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngModel",o.eleicao.configuracao.envioConviteVotacao)}}var Ze=function(){function e(e,t,n,a,o){this.modalService=e,this.router=t,this.route=n,this.eleicoesApi=a,this.toasts=o,this.subscriptions=new Qe.a}return e.prototype.ngOnInit=function(){var e=this;this.route.data.pipe(Object(C.a)((function(e){return e.hasOwnProperty("eleicao")})),Object(Je.a)((function(e){return e.eleicao})),Object(We.a)(1)).subscribe((function(t){return e.eleicao=t})),this.subscriptions.add(this.modalService.showModalEmitter.pipe(Object(C.a)((function(e){return!e}))).subscribe((function(t){return e.router.navigate(["/eleicoes"])})))},e.prototype.ngAfterViewInit=function(){this.modalService.showModal(this.modalConfiguracao,"Configura\xe7\xf5es")},e.prototype.salvarConfiguracoes=function(){var e=this;this.eleicoesApi.postConfiguracoes(this.eleicao.id,this.eleicao.configuracao).subscribe((function(t){e.toasts.showMessage({message:"Configura\xe7\xf5es atualizadas com sucesso!",title:"Sucesso!",type:l.a.success}),e.modalService.closeModal()}))},e.prototype.ngOnDestroy=function(){this.subscriptions.unsubscribe()},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](A.a),a["\u0275\u0275directiveInject"](o.d),a["\u0275\u0275directiveInject"](o.a),a["\u0275\u0275directiveInject"](i.a),a["\u0275\u0275directiveInject"](r.a))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){var n;1&e&&a["\u0275\u0275viewQuery"](Xe,!0),2&e&&a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.modalConfiguracao=n.first)},decls:2,vars:0,consts:[["modalConfiguracao",""],["type","checkbox",3,"ngModel","ngModelChange"],[1,"mt-3","btn","btn-primary",3,"click"],[1,"fa","fa-floppy-o"]],template:function(e,t){1&e&&a["\u0275\u0275template"](0,Ye,14,3,"ng-template",null,0,a["\u0275\u0275templateRefExtractor"])},directives:[V.CheckboxControlValueAccessor,V.NgControlStatus,V.NgModel],styles:[""]}),e}(),He=n("CF8v"),$e=[{path:"",component:me,data:{navigationType:fe.b.Top},children:[{path:":id/configuracao",component:Ze,resolve:{eleicao:He.a}}]},{path:"nova",component:Re,data:{navigationType:fe.b.Top},canActivate:[Be.a]},{path:":id",children:[{path:"dashboard",loadChildren:function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,"+zCQ")).then((function(e){return e.DashboardModule}))},data:{breadcrumb:"Elei\xe7\xf5es",title:"Elei\xe7\xf5es"},canLoad:[Ue.a]},{path:"cronograma",loadChildren:function(){return Promise.all([n.e(0),n.e(8)]).then(n.bind(null,"NTsU")).then((function(e){return e.CronogramaModule}))},data:{breadcrumb:"Elei\xe7\xf5es",title:"Elei\xe7\xf5es"},canLoad:[Ue.a]},{path:"eleitores",loadChildren:function(){return n.e(9).then(n.bind(null,"dUjW")).then((function(e){return e.EleitoresModule}))},data:{breadcrumb:"Elei\xe7\xf5es",title:"Elei\xe7\xf5es"},canLoad:[Ue.a]},{path:"inscricoes",loadChildren:function(){return n.e(10).then(n.bind(null,"icyZ")).then((function(e){return e.InscricoesModule}))}},{path:"votacao",loadChildren:function(){return n.e(11).then(n.bind(null,"T+Ks")).then((function(e){return e.VotacoesModule}))}}]}],Ke=function(){function e(){}return e.\u0275mod=a["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=a["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[o.g.forChild($e)],o.g]}),e}(),et=n("PCNd");n.d(t,"EleicoesModule",(function(){return tt}));var tt=function(){function e(){}return e.\u0275mod=a["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=a["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[et.a,Ke]]}),e}()},CF8v:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n("TYT/"),o=n("F/XL"),i=n("9Z1F"),r=n("GrLX"),l=n("DUip"),s=function(){function e(e,t){this.api=e,this.router=t}return e.prototype.resolve=function(e,t){var n=this;if(e.paramMap.has("id")){var a=+e.paramMap.get("id");return this.api.get(a).pipe(Object(i.a)((function(e){return n.router.navigate(["/not-found"]),Object(o.a)(null)})))}this.router.navigate(["/not-found"])},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275inject"](r.a),a["\u0275\u0275inject"](l.d))},e.\u0275prov=a["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},LOG3:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n("TYT/"),o=n("7dP1"),i=n("iufN"),r=n("dWir"),l=n("gbzl"),s=n("DUip"),c=function(){function e(e,t,n){this.authService=e,this.router=t,this.toast=n}return e.prototype.canActivate=function(){return!(!this.authService.tokenValido||this.authService.authInfo.perfil!==i.a.SESMT&&this.authService.authInfo.perfil!==i.a.Administrador)||(this.toast.showMessage({message:"Usu\xe1rio sem permiss\xe3o de acesso",title:"Sem permiss\xe3o",type:l.a.warning}),this.router.navigate(["/eleicoes"]),!1)},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275inject"](o.a),a["\u0275\u0275inject"](s.d),a["\u0275\u0275inject"](r.a))},e.\u0275prov=a["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},ZELa:function(e,t,n){}}]);